import './polyfills.server.mjs';
import{a as j,b as O,c as R,d as W,e as T,f as A,g as N,k as U,l as q,m as z,n as B}from"./chunk-7P2HO75R.mjs";import{a as w}from"./chunk-EKB64CGJ.mjs";import{L as p,Oa as h,Pa as E,U as v,W as n,X as a,Y as F,Z as V,_ as x,ba as y,ca as l,fa as g,fb as P,g as M,ga as u,ha as f,j as L,ja as k,m as S,n as c,q as _,w as s,x as d}from"./chunk-WJMAKVTM.mjs";import"./chunk-VVCT4QZE.mjs";var I={headers:new h({"Content-Type":"application/json"})},D=(()=>{class t{static{this.connectedUrl="login"}constructor(i){this.http=i}loginAdmin(i,o){return this.http.post(w.apiURL+t.connectedUrl,{email:i,password:o},I).pipe(M())}isAuthenticated(){let i={headers:new h({"Content-Type":"application/json"}),withCredentials:!0};return this.http.post(`${w.apiURL}admin/isAuthenticated`,{},i).pipe()}logoutAdmin(){let i={headers:new h({"Content-Type":"application/json"}),withCredentials:!0};return this.http.get(`${w.apiURL}/admin/logout`,i).pipe(M())}static{this.\u0275fac=function(o){return new(o||t)(S(E))}}static{this.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var b=class{};var me=(()=>{class t{constructor(){this.FormLogin=new b,this.adminService=c(D),this.cookieService=c(B),this.route=c(P)}OnSubmit(i){this.adminService.loginAdmin(this.FormLogin.email,this.FormLogin.password).subscribe(o=>{o.logged===!0&&(this.cookieService.set("user_id",o.user_id.toString()),this.cookieService.set("jwt",o.token),this.route.navigate(["accueil"])),i.resetForm()})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-login"]],standalone:!0,features:[k],decls:28,vars:4,consts:[["formLogin","ngForm"],["email","ngModel"],["password","ngModel"],["rememberMe","ngModel"],[1,"container-fluid","h-custom","vh-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-md-9","col-lg-6","col-xl-5"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp","alt","Sample image",1,"img-fluid"],[1,"col-md-8","col-lg-6","col-xl-4","offset-xl-1"],[3,"ngSubmit"],[1,"form-outline","mb-4"],["for","inputEmail",1,"form-label"],["type","email","id","inputEmail","pattern","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$","placeholder","mon-adresse-mail@contact.com","name","email","autocomplete","email","required","",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],[1,"form-outline","mb-3"],["for","inputPassword",1,"form-label"],["type","password","id","inputPassword","name","password","placeholder","Enter password","autocomplete","current-password","required","",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","align-items-center"],[1,"form-check","mb-0"],["type","checkbox","name","rememberMe","id","inputRemenberMe",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["for","inputRemenberMe",1,"form-check-label"],["href","#!",1,"text-body"],[1,"text-center","text-lg-start","mt-4","pt-2"],["type","submit",1,"btn","btn-primary","btn-lg",2,"padding-left","2.5rem","padding-right","2.5rem",3,"disabled"]],template:function(o,r){if(o&1){let m=V();n(0,"div",4)(1,"div",5)(2,"div",6),F(3,"img",7),a(),n(4,"div",8)(5,"form",9,0),x("ngSubmit",function(){s(m);let e=y(6);return d(r.OnSubmit(e))}),n(7,"div",10)(8,"label",11),l(9,"Email address V6"),a(),n(10,"input",12,1),f("ngModelChange",function(e){return s(m),u(r.FormLogin.email,e)||(r.FormLogin.email=e),d(e)}),a()(),n(12,"div",13)(13,"label",14),l(14,"Password"),a(),n(15,"input",15,2),f("ngModelChange",function(e){return s(m),u(r.FormLogin.password,e)||(r.FormLogin.password=e),d(e)}),a()(),n(17,"div",16)(18,"div",17)(19,"input",18,3),f("ngModelChange",function(e){return s(m),u(r.FormLogin.rememberMe,e)||(r.FormLogin.rememberMe=e),d(e)}),a(),n(21,"label",19),l(22," Remember me "),a()(),n(23,"a",20),l(24,"Forgot password?"),a()(),n(25,"div",21)(26,"button",22),l(27," Login "),a()()()()()()}if(o&2){let m=y(6);p(10),g("ngModel",r.FormLogin.email),p(5),g("ngModel",r.FormLogin.password),p(4),g("ngModel",r.FormLogin.rememberMe),p(7),v("disabled",!m.form.valid)}},dependencies:[z,N,O,j,R,W,U,q,A,T],styles:['.divider[_ngcontent-%COMP%]:after, .divider[_ngcontent-%COMP%]:before{content:"";flex:1;height:1px;background:#eee}.h-custom[_ngcontent-%COMP%]{height:calc(100% - 73px)}@media (max-width: 450px){.h-custom[_ngcontent-%COMP%]{height:100%}}']})}}return t})();export{me as default};
